#!/bin/bash

echo "[*]"
sleep .5
echo "---THC-Hydra Automation Tool---"
sleep .5
echo "[*]"
sleep .5
   read -p "[>] Target (must be an IP address): " targetIP
if [ "$targetIP" ]; then 
export targetIP="$targetIP"
echo "[+] Setting Target IP: $targetIP"
sleep .5
fi
if [ "$targetIP" ]; then
   IP_ADDR_VAL=$(echo "$targetIP" | grep -Ec '^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])')
   if [ $IP_ADDR_VAL -eq 0 ]; then
      echo -e "[-] $targetIP is not a valid IP Address."
exit 
   fi
else
   echo "[-] $targetIP is not a valid IP address!"
fi
sleep .5
read -p "[>] Login Name: " login
if [ "$login" ]; then 
export login="$login"
echo "[+] Setting Login Name: $login"
fi
sleep .5
while :
do
echo "************************"
echo "* Service to Crack *"
echo "************************"
echo "[1]  TELNET"
echo "[2]  FTP"
echo "[3]  SSH"
echo "[4]  RSH"
echo "[5]  SMTP"
echo "[6]  POP3"
echo "[7]  SMB"
echo "[8]  IMAP"
echo "[9]  HTTP-PROXY"
echo "[10] HTTP-GET"
echo "[11] HTTP-POST-FORM"
echo "[12] HTTP-HEAD"
echo "[13] HTTPS-GET"
echo "[0]  Exit/Stop"
echo "************************"
echo -n "[>] Select Service: "
read yourch
case $yourch in
1) export PROTO="telnet"
echo "[+] Setting Service: TELNET"
break ;;
2) export PROTO="ftp"
echo "[+] Setting Service: FTP"
break ;;
3) export PROTO="ssh2"
echo "[+] Setting Service: SSH"
break ;;
4) export PROTO="rsh"
echo "[+] Setting Service: RSH"
break ;;
5) export PROTO="smtp-auth"
echo "[+] Setting Service: SMTP"
break ;;
6) export PROTO="pop3"
echo "[+] Setting Service: POP3"
break ;;
7) export PROTO="smb"
echo "[+] Setting Service: SMB"
break ;;
8) export PROTO="imap"
echo "[+] Setting Service: IMAP"
break ;;
9) export PROTO="http-proxy"
echo "[+] Setting Service: HTTP-PROXY"
break ;;
10) export PROTO="http-get"
echo "[+] Setting Service: HTTP-GET"
break ;;
11) export PROTO="http-post-form"
echo "[+] Setting Service: HTTP-POST-FORM"
read -p "[>] Please Enter Post Back Page Of Website (i.e index.php?):" var1
if [ "$var1" ]; then 
export var1="$var1"
fi
read -p "[>] Please Enter Post Parameters (i.e. {USERNAME_NAME}=^USER^&{PASSWORD_NAME}=^PASS^):" var2
if [ "$var2" ]; then
export var2=":$var2"
fi
read -p "[>] Please Enter Failed Login Text (i.e. /login=failed):" var3
if [ "$var3" ]; then
export var3=":$var3"
fi
break ;;
12) export PROTO="http-head"
echo "[+] Setting Service: HTTP-HEAD"
break ;;
13) export PROTO="https-get"
echo "[+] Setting Service: HTTPS-GET"
break ;;
0) exit 0;;
*) echo "Oopps!!! Please select choice [1-13]";
echo "Press Enter to continue. . ." ; read ;;
esac
done
sleep .5
   read -p "[>] Dictionary Path (enter for default): " DICT_PATH
if [ "$DICT_PATH" ]; then
export DICT_PATH="$DICT_PATH" 
echo "[+] Setting Dictionary Path: $DICT_PATH"
elif [ "$DICT_PATH" == "" ]; then
export DICT_PATH="/var/mobile/pentest/exploits/iCTRL/cupp/dictionaries/wordlist.txt"
fi
hydra -l $login -P "$DICT_PATH" -e ns -t 15 -f -s -vV "$targetIP" "$PROTO" /$var1$var2$var3
sleep .5
echo "[>] Done!" 

